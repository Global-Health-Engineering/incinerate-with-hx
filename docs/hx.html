<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.545">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>docs - Heat exchanger</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script defer="" data-domain="global-health-engineering.github.io/incinerate-with-hx/" src="https://plausible.io/js/script.js"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">docs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./incinerator_adaptations.html"> 
<span class="menu-text">Adaptations to Incinerators</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./hx.html" aria-current="page"> 
<span class="menu-text">Heat Exchanger</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./wst.html"> 
<span class="menu-text">Waste Sorting Table and Lift</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:ghe@mavt.ethz.ch?subject=Incinerator design"> <i class="bi bi-envelope-at" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Global-Health-Engineering/incinerate-with-hx"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://matrix.to/#/#ghe-open:staffchat.ethz.ch"> <i class="bi bi-chat-left-dots" role="img" aria-label="Matrix">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-description" id="toc-sec-description" class="nav-link active" data-scroll-target="#sec-description"><span class="header-section-number">1</span> Assembly Manual</a></li>
  <li><a href="#sec-costs" id="toc-sec-costs" class="nav-link" data-scroll-target="#sec-costs"><span class="header-section-number">2</span> Costs</a></li>
  <li><a href="#sec-operation" id="toc-sec-operation" class="nav-link" data-scroll-target="#sec-operation"><span class="header-section-number">3</span> Operation</a></li>
  <li><a href="#sec-maintenance" id="toc-sec-maintenance" class="nav-link" data-scroll-target="#sec-maintenance"><span class="header-section-number">4</span> Maintenance</a></li>
  <li><a href="#sec-safety" id="toc-sec-safety" class="nav-link" data-scroll-target="#sec-safety"><span class="header-section-number">5</span> Safety Precautions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Heat exchanger</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The water heating systems were installed on two De Montfort Mark 8A incinerators: one at Billy’s Clinic and one at Sustainable Cape Maclear’s waste deposit site. The purpose of these systems is to recover heat from the incineration process and repurpose it to heat water for sanitary use, improving resource efficiency while reducing reliance on external energy sources.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/photo/hx1.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 1. Heat exchanger mounted on the incinerator’s chimney heating up water in the barrel.</figcaption>
</figure>
</div>
<p>This page details how the heat exchanger was designed, assembled, and installed, providing step-by-step insights into the construction process, operational principles, and maintenance requirements. By documenting the challenges encountered and the solutions developed, this guide serves as a reference for replicating similar heat recovery systems on other small-scale incinerators, particularly in resource-limited settings where sustainable solutions are essential.</p>
<section id="sec-description" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Assembly Manual</h1>
<p>The heat exchanger is a copper pipe coiled around the incinerator chimney, transferring heat to a 210 l plastic drum filled with water. The water heating mechanism relies solely on natural convection and does not required additional work input.</p>
<p>The assembly required several key steps:</p>
<ol type="1">
<li><strong>Winding the copper pipe</strong>. The pipe was initially purchased in the form of a coil. To wrap it securely around the chimney, it has to be manually bent to fit the chimney’s external diameters, as closely as possible, so the heat transfer is maximized.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/photo/hx2.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 2. Winding two copper pipes for two incinerators.</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li><p><strong>Preventing cracks during bending</strong>. Copper pipes are prone to cracking when bent, therefore a precautionary method was used to minimize the risk of damage. Before bending, a mixture of water and soap was poured into the pipe and then frozen using ice cubes in a bucket. The frozen liquid inside helped maintain the pipe’s structural integrity, allowing for it to be bent without collapsing or breaking.</p></li>
<li><p><strong>Fixing cracks</strong>. In cases where small cracks did appear, a blowtorch was used to seal them to ensure structural integrity for water circulation.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/photo/hx3.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 3. Fixing cracks with a blowtorch.</figcaption>
</figure>
</div>
<ol start="4" type="1">
<li><strong>Positioning the pipes on the chimney</strong>. The pipe was wrapped as tightly as possible around the chimney to maximize the heat transfer.</li>
<li><strong>Connecting the pipes to the water storage system</strong>. The ends of the copper pipe were mounted to the 210 l plastic drum that served as the water storage unit. Two holes were drilled into the drum to allow for the water from the pipes to enter and exit the drum. An adhesive sealant was applied around the openings to ensure airtight connection and prevent leaks.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/photo/hx4.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 4. Applying sealant on the water tap; similarly it was applied on the copper pipe-to-drum connections.</figcaption>
</figure>
</div>
<ol start="6" type="1">
<li><strong>Final adjustments</strong>. To provide insulation and reduce the heat loss (maintaining higher water temperature for extended periods) the drum was covered with a wooden lid. Two taps were drilled into the plastic drum to drain warm at different heights. Two taps are needed if not enough waste is burnt for the entire volume of water to heat up; if this is the case, the water can be drained from the higher tap, relying on introduced temperature gradient in the tank (warmer water stays at the top before it mixes with cold water). Finally, a skimmer made out of steel wire and mosquito net was made to clean the water stored in the plastic drum.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/photo/hx5.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 5. Skimmer for separating waste from water.</figcaption>
</figure>
</div>
</section>
<section id="sec-costs" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Costs</h1>
<p>To ensure consistency across reporting, all the cost calculations were converted from MWK to USD with an exchange rate of 2,000 MWK/USD.</p>
<div id="tbl-hx-costs" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-hx-costs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Costs of adding a heat exchanger to one incinerator.
</figcaption>
<div aria-describedby="tbl-hx-costs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 23%">
<col style="width: 40%">
<col style="width: 17%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Category</strong></th>
<th><strong>Details</strong></th>
<th><strong>Price (MWK)</strong></th>
<th><strong>Price (USD)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Copper pipes</td>
<td>15 meters, 1/2” diameter</td>
<td>200,000</td>
<td>100.00</td>
</tr>
<tr class="even">
<td>Plastic drum</td>
<td>210 L capacity</td>
<td>100,000</td>
<td>50.00</td>
</tr>
<tr class="odd">
<td>Taps</td>
<td>2 drilled into each drum</td>
<td>4,000</td>
<td>2.00</td>
</tr>
<tr class="even">
<td>Steel wire</td>
<td>-</td>
<td>18,500</td>
<td>9.25</td>
</tr>
<tr class="odd">
<td>Labor</td>
<td>Assembling &amp; pipe bending</td>
<td>58,500</td>
<td>29.25</td>
</tr>
<tr class="even">
<td>Lid</td>
<td>To cover the plastic drum</td>
<td>15,000</td>
<td>7.50</td>
</tr>
<tr class="odd">
<td>Adhesive</td>
<td>Ensures air-tightness of the holes</td>
<td>5,250</td>
<td>2.61</td>
</tr>
<tr class="even">
<td><strong>Total</strong></td>
<td>-</td>
<td><strong>401,250</strong></td>
<td><strong>200.63</strong></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="sec-operation" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Operation</h1>
<p>The heat exchanger operates thanks to thermal convection, using temperature gradient in the tank to naturally circulate water. The process works as follows:</p>
<ul>
<li>Cold water enters the copper pipes from the bottom of the plastic drum.</li>
<li>As the incinerator chimney heats up, the copper pipes absorb the heat, heating the water in the pipes.</li>
<li>Natural convection causes the heated water to rise through the pipes. Hot water exits the pipe at top of the plastic drum, while colder water flows in the copper pipe from the bottom of the drum, maintaining continuous circulation.</li>
</ul>
<p>Under normal operating conditions:</p>
<ul>
<li>The system takes approximately 40 minutes before the first heated water exits the pipes.</li>
<li>The water laving the copper coil reaches a maximum temperature of 70°C.</li>
<li>Stored water inside the drum stabilizes at approximately 45°C, good for sanitary purposes: hand washing and cleaning in the clinic.</li>
<li>To ensure that no solid particles contaminate the water, a water skimmer is used to filter out debris before use.</li>
</ul>
</section>
<section id="sec-maintenance" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Maintenance</h1>
<p>The heat exchanger requires minimal maintenance to ensure long-term efficiency. Key maintenance tasks include:</p>
<ul>
<li><strong>Checking for leaktightness</strong>. Regularly inspecting the pipe connections at the drum for any signs of leakage and resealing if necessary.</li>
<li><strong>Cleaning the water skimmer</strong>. Ensuring that the skimmer remains free of debris to prevent clogging and maintain water quality.</li>
<li><strong>Inspecting the copper pipes</strong>. Monitoring the pipes for cracks or wear, particularly in areas exposed to high heat stress.</li>
<li><strong>Preventing blockages</strong>. Occasionally flushing the pipes with clean water to remove any potential mineral buildup inside.</li>
</ul>
<p>Since the system operates passively using thermal convection, there are no mechanical parts that require frequent servicing, making it a low-maintenance solution for heat recovery.</p>
</section>
<section id="sec-safety" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Safety Precautions</h1>
<p>To ensure safe operation of the heat exchanger, the following precautions should be followed:</p>
<ul>
<li><strong>Pipe handling</strong>. When bending copper pipes, always use the water-freezing method to prevent cracks.</li>
<li><strong>Blowtorch use</strong>. If cracks need to be repaired, use the blowtorch carefully and ensure it is handled by trained personnel.</li>
<li><strong>Avoid drum overheating</strong>. The plastic drum should be monitored to ensure it does not exceed its heat tolerance limits.</li>
<li><strong>Proper sealing</strong>. The adhesive around pipe openings should be regularly checked to prevent air leaks, which could disrupt the convection process.</li>
<li><strong>Heat protection</strong>. Since the pipes reach high temperatures, operators should wear protective gloves when handling them to avoid burns.</li>
</ul>
<p>By following these precautions, the heat exchanger can continue to operate safely and efficiently, providing a reliable supply of warm water for medical and personal use.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This project was supported by the <a href="https://ghe.ethz.ch">Global Health Engineering Group at ETH Zurich</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:ghe@mavt.ethz.ch?subject=Incinerator design">
      <i class="bi bi-envelope-at" role="img" aria-label="Email">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Global-Health-Engineering/incinerate-with-hx">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://matrix.to/#/#ghe-open:staffchat.ethz.ch">
      <i class="bi bi-chat-left-dots" role="img" aria-label="Matrix">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>